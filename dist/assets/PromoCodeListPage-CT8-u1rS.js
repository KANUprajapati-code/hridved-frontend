import{j as e,a}from"./index-DsP1R5yV.js";import{r as i,L as d}from"./vendor-react-B8KVy-C4.js";import{y as p,a6 as h,u as y,o as g,X as j,ab as f,s as u}from"./vendor-ui-DMuw5F6C.js";import"./vendor-utils-C0Zqfgkc.js";const A=()=>{const[n,o]=i.useState([]),[l,c]=i.useState(!0),s=async()=>{try{const{data:t}=await a.get("/coupons");o(t)}catch(t){console.error("Error fetching coupons:",t)}finally{c(!1)}};i.useEffect(()=>{s()},[]);const x=async t=>{if(window.confirm("Are you sure you want to delete this promo code?"))try{await a.delete(`/coupons/${t}`),s()}catch(r){console.error("Error deleting coupon:",r),alert("Error deleting coupon")}},m=async t=>{try{await a.put(`/coupons/${t._id}`,{isActive:!t.isActive}),s()}catch(r){console.error("Error updating coupon status:",r),alert("Error updating coupon status")}};return l?e.jsx("div",{className:"text-center py-20 font-serif text-xl",children:"Loading Promo Codes..."}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(d,{to:"/admin",className:"flex items-center gap-2 text-gray-600 hover:text-primary mb-6 transition-colors",children:[e.jsx(p,{size:20})," Back to Dashboard"]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h1",{className:"text-3xl font-serif font-bold text-primary flex items-center gap-2",children:[e.jsx(h,{size:28})," Promo Codes"]}),e.jsxs(d,{to:"/admin/promocode/add",className:"bg-primary text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-opacity-90 transition shadow-md font-bold",children:[e.jsx(y,{size:20})," Add New Code"]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-100 text-gray-700 uppercase text-xs font-bold tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-4 px-6",children:"Code"}),e.jsx("th",{className:"py-4 px-6",children:"Discount"}),e.jsx("th",{className:"py-4 px-6",children:"Type"}),e.jsx("th",{className:"py-4 px-6",children:"Min Order"}),e.jsx("th",{className:"py-4 px-6",children:"Expiry"}),e.jsx("th",{className:"py-4 px-6 text-center",children:"Status"}),e.jsx("th",{className:"py-4 px-6 text-right",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-50",children:[n.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:"bg-primary/10 text-primary px-3 py-1 rounded-md font-bold border border-primary/20",children:t.code})}),e.jsx("td",{className:"py-4 px-6 font-medium text-gray-900",children:t.type==="percentage"?`${t.discount}%`:`₹${t.discount}`}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-500 capitalize",children:t.type}),e.jsxs("td",{className:"py-4 px-6 text-sm text-gray-500",children:["₹",t.minOrderAmount]}),e.jsx("td",{className:"py-4 px-6 text-sm",children:e.jsx("span",{className:new Date(t.expiryDate)<new Date?"text-red-500 font-medium":"text-gray-600",children:new Date(t.expiryDate).toLocaleDateString()})}),e.jsx("td",{className:"py-4 px-6 text-center",children:e.jsxs("button",{onClick:()=>m(t),className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold transition-all ${t.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[t.isActive?e.jsx(g,{size:12,className:"mr-1"}):e.jsx(j,{size:12,className:"mr-1"}),t.isActive?"Active":"Inactive"]})}),e.jsx("td",{className:"py-4 px-6 text-right",children:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(d,{to:`/admin/promocode/${t._id}/edit`,className:"text-blue-500 hover:text-blue-700 transition",title:"Edit",children:e.jsx(f,{size:18})}),e.jsx("button",{onClick:()=>x(t._id),className:"text-red-400 hover:text-red-600 transition",title:"Delete",children:e.jsx(u,{size:18})})]})})]},t._id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"py-10 text-center text-gray-400 italic",children:'No promo codes found. Click "Add New Code" to create one.'})})]})]})})})]})};export{A as default};
