import{j as e,L as P,a as u}from"./index-jnhJKHVM.js";import{r as h}from"./vendor-react-B8KVy-C4.js";import{m as r,p as k,a as v,C as N}from"./vendor-ui-cGIEGKxt.js";import"./vendor-utils-C0Zqfgkc.js";const E=()=>{var g,p,b,j,y;const[n,d]=h.useState(!1),[s,o]=h.useState(null),[m,x]=h.useState(null),[c,f]=h.useState("560001"),w=async()=>{var t,a;d(!0),x(null),o(null);try{const i=await u.get("/shipping/health");o(i.data)}catch(i){x(((a=(t=i.response)==null?void 0:t.data)==null?void 0:a.message)||i.message||"Failed to test API")}finally{d(!1)}},C=async()=>{var t,a;d(!0),x(null),o(null);try{const i=await u.post("/shipping/serviceability",{pincode:c,weight:.5,cod:0});o({type:"serviceability",pincode:c,data:i.data})}catch(i){x(((a=(t=i.response)==null?void 0:t.data)==null?void 0:a.message)||i.message||"Serviceability check failed")}finally{d(!1)}},S={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,staggerChildren:.1}}},l={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3}}};return e.jsx(r.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4",variants:S,initial:"hidden",animate:"visible",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsxs(r.div,{variants:l,className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(k,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"FShip API Test"})]}),e.jsx("p",{className:"text-gray-600",children:"Test your FShip API integration"})]}),e.jsx(r.div,{variants:l,className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"API Health Check"}),e.jsx(r.button,{onClick:w,disabled:n,whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-full px-6 py-3 rounded-lg font-bold text-white transition-all ${n?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 shadow-md"}`,children:n?"Testing...":"Run Health Check"})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Serviceability Check"}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("input",{type:"text",value:c,onChange:t=>f(t.target.value),placeholder:"Enter pincode (e.g., 560001)",maxLength:"6",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"}),e.jsx(r.button,{onClick:C,disabled:n||!c,whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-6 py-2 rounded-lg font-bold text-white transition-all ${n||!c?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 shadow-md"}`,children:n?"Testing...":"Test"})]})]})]})}),n&&e.jsx(r.div,{variants:l,children:e.jsx(P,{size:"lg"})}),m&&e.jsx(r.div,{variants:l,className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(v,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-red-900 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-800",children:m})]})]})}),s&&e.jsxs(r.div,{variants:l,className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(N,{className:"w-6 h-6 text-green-500"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:s.type==="serviceability"?"Serviceability Results":"Health Check Results"})]}),s.message&&e.jsxs(r.div,{variants:l,className:"mb-8 space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{className:s.status==="healthy"?"text-green-600 font-bold":"text-yellow-600",children:(g=s.status)==null?void 0:g.toUpperCase()})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("strong",{children:"API Configured:"})," ",s.apiConfigured?"✓ Yes":"✗ No"]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("strong",{children:"Base URL:"})," ",s.baseUrl]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("strong",{children:"Tested At:"})," ",new Date(s.timestamp).toLocaleString()]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"Detailed Tests:"}),s.tests&&Object.entries(s.tests).map(([t,a])=>e.jsxs(r.div,{variants:l,className:`rounded-lg p-4 border ${a.status==="success"?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.status==="success"?e.jsx(N,{className:"w-5 h-5 text-green-600"}):e.jsx(v,{className:"w-5 h-5 text-red-600"}),e.jsx("h5",{className:"font-bold text-gray-900 capitalize",children:t})]}),e.jsx("p",{className:`text-sm ${a.status==="success"?"text-green-700":"text-red-700"}`,children:a.status==="success"?"✓ Passed":"✗ Failed"}),a.pincode&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("strong",{children:"Pincode:"})," ",a.pincode]}),a.error&&e.jsxs("p",{className:"text-sm text-red-600 mt-2",children:[e.jsx("strong",{children:"Error:"})," ",a.error]}),a.data&&e.jsx("pre",{className:"bg-gray-900 text-green-400 p-3 rounded mt-3 text-xs overflow-x-auto",children:JSON.stringify(a.data,null,2)})]},t))]})]}),s.type==="serviceability"&&e.jsxs(r.div,{variants:l,className:"space-y-4",children:[e.jsxs("div",{className:`rounded-lg p-4 border ${(p=s.data)!=null&&p.serviceable?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Pincode:"})," ",s.pincode]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[e.jsx("strong",{children:"Serviceable:"})," ",e.jsx("span",{className:(b=s.data)!=null&&b.serviceable?"text-green-600 font-bold":"text-yellow-600",children:(j=s.data)!=null&&j.serviceable?"✓ Yes":"⚠ No"})]})]}),((y=s.data)==null?void 0:y.shippingOptions)&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"Shipping Options:"}),e.jsx("div",{className:"space-y-2",children:s.data.shippingOptions.map((t,a)=>e.jsx(r.div,{variants:l,className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-gray-900",children:[t.type," Delivery"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Delivery: ",t.days," days"]})]}),e.jsxs("p",{className:"font-bold text-blue-600 text-lg",children:["₹",t.charge]})]})},a))})]}),e.jsx("pre",{className:"bg-gray-900 text-green-400 p-4 rounded mt-4 text-xs overflow-x-auto",children:JSON.stringify(s.data,null,2)})]})]}),e.jsxs(r.div,{variants:l,className:"mt-12 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h4",{className:"font-bold text-blue-900 mb-3",children:"Test Information"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-2",children:[e.jsx("li",{children:"✓ Health Check tests API connectivity and configuration"}),e.jsx("li",{children:"✓ Serviceability Check tests shipping rate calculation for a pincode"}),e.jsx("li",{children:"✓ Use real pincodes (6 digits) for accurate results"}),e.jsx("li",{children:"✓ Check your FSHIP_API_KEY in server .env file if tests fail"})]})]})]})})};export{E as default};
