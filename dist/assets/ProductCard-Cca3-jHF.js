import{j as e,u as N}from"./index-jnhJKHVM.js";import{r as i,L as y}from"./vendor-react-B8KVy-C4.js";import{v,m as h,E as k,H as I,b as C,i as S}from"./vendor-ui-cGIEGKxt.js";const E=({src:t,alt:n="Image",placeholder:a="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 400 400%22%3E%3Crect fill=%22%23f0f0f0%22 width=%22400%22 height=%22400%22/%3E%3C/svg%3E",className:l="",width:c,height:m,onLoad:s})=>{const[x,p]=i.useState(a),[b,w]=i.useState(null),u=i.useRef(null);return i.useEffect(()=>{const d=new IntersectionObserver(r=>{r.forEach(o=>{if(o.isIntersecting){const f=new Image;f.src=t,f.onload=()=>{p(t),s&&s()},f.onerror=()=>{p(a)},d.unobserve(o.target)}})},{rootMargin:"50px"}),g=u.current;return g&&d.observe(g),()=>{g&&d.unobserve(g)}},[t,a,s]),e.jsx("img",{ref:u,src:x,alt:n,className:`transition-opacity duration-300 ${x===a?"opacity-50":"opacity-100"} ${l}`,width:c,height:m,loading:"lazy"})},z=({src:t,alt:n="Product Image",className:a="",width:l,height:c,onLoad:m,showPlaceholder:s=!0})=>{const[x,p]=i.useState(!0),[b,w]=i.useState(!1),d=(r=>{if(!r)return r;if(r&&r.includes("cloudinary.com")){const o=r.split("/upload/");if(o.length===2){const f=o[0],j=o[1];return`${f}/upload/c_fill,q_auto,f_auto/${j}`}}return r})(t);return e.jsxs("div",{className:`relative bg-gray-100 overflow-hidden ${a}`,children:[x&&s&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-100 via-gray-50 to-gray-100 animate-pulse flex items-center justify-center",children:e.jsx(v,{size:48,className:"text-gray-300"})}),e.jsx(E,{src:d||t,alt:n,placeholder:"data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 400 400%22%3E%3Crect fill=%22%23f3f4f6%22 width=%22400%22 height=%22400%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-family=%22system-ui%22 font-size=%2250%22 fill=%22%23d1d5db%22%3E%3C/text%3E%3C/svg%3E",className:`w-full h-full object-cover transition-opacity duration-500 ${x?"opacity-0":"opacity-100"}`,width:l,height:c,onLoad:()=>{p(!1),m&&m()}}),b&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(v,{size:48,className:"text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Image unavailable"})]})})]})},P=({product:t,onQuickView:n})=>{const{addToCart:a}=N(),[l,c]=i.useState(!1);return e.jsxs(h.div,{layout:!0,initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"card-premium group bg-white flex flex-col h-full relative",children:[e.jsxs("div",{className:"absolute top-2 left-2 sm:top-4 sm:left-4 z-20 flex flex-col gap-1 sm:gap-2",children:[t.isBestseller&&e.jsx(h.span,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"glass text-primary text-[8px] sm:text-[10px] font-black px-2 sm:px-3 py-0.5 sm:py-1 rounded-full uppercase tracking-widest shadow-lg",children:"Bestseller"}),t.countInStock>0&&t.countInStock<=5&&e.jsxs("span",{className:"bg-red-500 text-white text-[8px] sm:text-[10px] font-black px-2 sm:px-3 py-0.5 sm:py-1 rounded-full uppercase tracking-widest shadow-lg",children:["Only ",t.countInStock," Left"]})]}),e.jsxs("div",{className:"relative h-48 sm:h-72 overflow-hidden bg-gray-50 flex items-center justify-center",children:[e.jsx(y,{to:`/product/${t._id}`,className:"w-full h-full block",children:e.jsx(z,{src:t.image,alt:t.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"})}),e.jsxs("div",{className:"absolute inset-0 bg-black/10 lg:bg-black/20 opacity-100 lg:opacity-0 lg:group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center gap-3",children:[e.jsx(h.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>n&&n(t),className:"w-12 h-12 bg-white rounded-full flex items-center justify-center text-primary shadow-2xl hover:bg-primary hover:text-white transition-all transform translate-y-0 lg:-translate-y-4 lg:group-hover:translate-y-0 duration-300",title:"Quick View",children:e.jsx(k,{size:20})}),e.jsx(h.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c(!l),className:`w-12 h-12 rounded-full flex items-center justify-center shadow-2xl transition-all transform translate-y-0 lg:translate-y-4 lg:group-hover:translate-y-0 duration-300 delay-75 ${l?"bg-red-500 text-white":"bg-white text-primary hover:bg-red-50"}`,title:"Add to Wishlist",children:e.jsx(I,{size:20,fill:l?"currentColor":"none"})})]}),t.countInStock===0&&e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-[2px] flex items-center justify-center z-10",children:e.jsx("span",{className:"bg-white/10 border border-white/20 text-white text-[10px] font-black px-4 py-2 rounded-full uppercase tracking-[0.2em] backdrop-blur-md",children:"Sold Out"})})]}),e.jsxs("div",{className:"p-3 sm:p-6 flex flex-col flex-grow",children:[e.jsx("div",{className:"mb-1 sm:mb-2",children:e.jsx(y,{to:`/shop?category=${t.category}`,className:"text-[8px] sm:text-[10px] font-black text-secondary uppercase tracking-[0.1em] hover:text-primary transition-colors",children:t.category})}),e.jsx(y,{to:`/product/${t._id}`,className:"group-hover:text-primary transition-colors",children:e.jsx("h3",{className:"text-sm sm:text-lg font-bold text-gray-800 line-clamp-2 mb-2 sm:mb-3 leading-tight sm:leading-snug",children:t.name})}),e.jsxs("div",{className:"mt-auto flex items-center justify-between pt-2 sm:pt-4 border-t border-gray-50",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[8px] sm:text-[10px] text-gray-400 font-bold uppercase tracking-wider mb-0.5",children:"Investment"}),e.jsxs("span",{className:"text-lg sm:text-2xl font-black text-primary font-display",children:["â‚¹",t.price]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("button",{onClick:()=>a(t),className:"bg-primary text-white p-2 sm:p-3 rounded-lg sm:rounded-xl hover:bg-secondary hover:text-primary transition-all duration-300 shadow-md hover:shadow-xl transform active:scale-95 mb-1",title:"Add to Cart",children:e.jsx(C,{size:14,className:"sm:w-[18px] sm:h-[18px]"})}),e.jsx("div",{className:"flex text-secondary gap-0.5",children:[...Array(5)].map((m,s)=>e.jsx(S,{size:8,className:s<(t.rating||0)?"text-secondary":"text-gray-200",fill:s<(t.rating||0)?"currentColor":"none"},s))})]})]})]})]})};export{z as P,P as a};
