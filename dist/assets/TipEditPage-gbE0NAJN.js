import{j as e,a as n}from"./index-jnhJKHVM.js";import{e as C,b as S,r,L as U}from"./vendor-react-B8KVy-C4.js";import{c as k}from"./imageCompression-nMn3csfP.js";import{y as E,ad as I}from"./vendor-ui-cGIEGKxt.js";import"./vendor-utils-C0Zqfgkc.js";const P=()=>{const{id:s}=C(),b=S(),[c,d]=r.useState(""),[p,u]=r.useState(""),[m,o]=r.useState(""),[g,x]=r.useState(""),[y,l]=r.useState(!1),[j,f]=r.useState(!0);r.useEffect(()=>{(async()=>{try{const{data:a}=await n.get(`/tips/${s}`);d(a.title),u(a.description),o(a.image),x(a.category),f(!1)}catch(a){console.error(a),f(!1)}})()},[s]);const v=async t=>{const a=t.target.files[0];if(a){l(!0);try{const i=await k(a,{quality:.7,maxWidth:1200}),h=new FormData;h.append("image",i);const{data:w}=await n.post("/upload",h),T=w.replace(/\\/g,"/");o(T),l(!1)}catch(i){console.error("Tip image upload failed:",i),alert("Image upload failed. Try a smaller image."),l(!1)}}},N=async t=>{t.preventDefault();try{await n.put(`/tips/${s}`,{title:c,description:p,image:m,category:g}),b("/admin/tiplist")}catch(a){console.error(a)}};return j?e.jsx("div",{className:"text-center py-20",children:"Loading..."}):e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[e.jsxs(U,{to:"/admin/tiplist",className:"text-gray-500 hover:text-primary mb-4 flex items-center gap-2 transition-colors",children:[e.jsx(E,{size:18})," Go Back"]}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md border",children:[e.jsx("h1",{className:"text-2xl font-serif font-bold text-primary mb-6",children:"Edit Tip"}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Title"}),e.jsx("input",{type:"text",required:!0,placeholder:"Enter tip title",className:"w-full border p-2 rounded focus:outline-none focus:border-secondary",value:c,onChange:t=>d(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Category"}),e.jsx("input",{type:"text",required:!0,placeholder:"e.g. Wellness, Nutrition, Yoga",className:"w-full border p-2 rounded focus:outline-none focus:border-secondary",value:g,onChange:t=>x(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Image"}),e.jsx("input",{type:"text",required:!0,placeholder:"Image URL or Upload",className:"w-full border p-2 rounded focus:outline-none focus:border-secondary mb-2",value:m,onChange:t=>o(t.target.value)}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",id:"image-file",className:"hidden",onChange:v}),e.jsxs("label",{htmlFor:"image-file",className:"cursor-pointer bg-gray-100 py-2 px-4 rounded border hover:bg-gray-200 inline-flex items-center gap-2",children:[e.jsx(I,{size:16})," ",y?"Uploading...":"Upload Image"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Description"}),e.jsx("textarea",{required:!0,rows:"6",placeholder:"Write your tip content here...",className:"w-full border p-2 rounded focus:outline-none focus:border-secondary",value:p,onChange:t=>u(t.target.value)})]}),e.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2 rounded hover:bg-opacity-90 transition font-bold",children:"Update Tip"})]})]})]})};export{P as default};
