import{u as F,b as M,T as B,j as e,a as S}from"./index-DsP1R5yV.js";import{b as H,r as a,L as x}from"./vendor-react-B8KVy-C4.js";import{A as E}from"./AnimatedPage-D9f9vAm_.js";import{S as f}from"./ScrollReveal-CR-2c4a2.js";import{A as y}from"./AnimatedButton-BHsbnN3-.js";import{a as D}from"./ProductCard-CObmE8Fg.js";import{r as A,f as R,s as O,t as U,u as V,h as L,g as W,R as G}from"./vendor-ui-DMuw5F6C.js";import"./vendor-utils-C0Zqfgkc.js";const te=()=>{const{cart:m,removeFromCart:T,updateCartItemQuantity:j}=F(),{user:z}=M(),b=H(),[l,N]=a.useState(""),[r,p]=a.useState(null),[v,n]=a.useState(""),[P,q]=a.useState([]),{addToast:o}=a.useContext(B);a.useEffect(()=>{(async()=>{try{const{data:t}=await S.get("/products?isBestseller=true&limit=4");q(t.products||[])}catch(t){console.error("Error fetching recommendations:",t)}})()},[]);const c=(m==null?void 0:m.cartItems)||[],I=()=>{b(z?"/checkout/address":"/login?redirect=checkout/address")},w=async()=>{var s,t;if(l)try{const{data:g}=await S.post("/coupons/validate",{code:l,cartTotal:d});p(g),n(""),o&&o("Coupon applied successfully!","success")}catch(g){const k=((t=(s=g.response)==null?void 0:s.data)==null?void 0:t.message)||"Invalid coupon code";n(k),p(null),o&&o(k,"error")}},Y=()=>{p(null),N(""),n("")},d=c.reduce((s,t)=>s+t.qty*t.price,0);let i=0;r&&(r.type==="percentage"?i=d*r.discount/100:i=r.discount);const h=d-i,u=h>499?0:50,C=Math.round(h*.18),$=h+u+C;return c.length===0?e.jsx(E,{children:e.jsxs("div",{className:"container mx-auto px-4 py-20 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"bg-primary/10 p-6 rounded-full text-primary",children:e.jsx(A,{size:48})})}),e.jsx("h2",{className:"text-3xl font-serif font-bold mb-4 text-gray-800",children:"Your Cart is Empty"}),e.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Looks like you haven't added any Ayurvedic wellness products to your cart yet."}),e.jsx(x,{to:"/shop",children:e.jsxs(y,{className:"bg-primary text-white px-8 py-3 rounded-full hover:bg-opacity-90 transition inline-flex items-center font-bold shadow-lg hover:shadow-xl border-none",children:["Explore Shop ",e.jsx(R,{size:18,className:"ml-2"})]})})]})}):e.jsx(E,{children:e.jsxs("div",{className:"bg-background min-h-screen",children:[e.jsx("div",{className:"bg-primary text-white text-center py-2 text-sm font-medium tracking-wide",children:"Free Shipping Above ₹499"}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"flex items-center text-sm text-gray-500 mb-8",children:e.jsxs(x,{to:"/shop",className:"hover:text-primary flex items-center",children:[e.jsx(R,{size:14,className:"rotate-180 mr-2"})," Continue Shopping"]})}),e.jsxs("div",{className:"flex justify-between items-end mb-8",children:[e.jsx("h1",{className:"text-4xl font-serif font-bold text-gray-900",children:"Shopping Cart"}),e.jsxs("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm font-medium",children:[c.reduce((s,t)=>s+t.qty,0)," Items"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-12",children:[e.jsxs("div",{className:"lg:w-2/3 space-y-6",children:[c.map((s,t)=>e.jsx(f,{delay:t*.1,children:e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm flex flex-col sm:flex-row gap-6 items-center sm:items-start transition hover:shadow-md",children:[e.jsx(x,{to:`/product/${s.product}`,className:"w-full sm:w-32 h-32 flex-shrink-0 bg-gray-50 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-grow w-full text-center sm:text-left",children:[e.jsx("p",{className:"text-xs text-secondary font-bold uppercase tracking-wider mb-1",children:"AYURVEDA"}),e.jsx(x,{to:`/product/${s.product}`,className:"font-serif font-bold text-lg text-gray-800 hover:text-primary transition-colors block mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-4 text-sm text-gray-500 mb-4",children:[e.jsxs("button",{className:"hover:text-primary flex items-center gap-1",children:[e.jsx("span",{children:"♡"})," Save for later"]}),e.jsxs("button",{onClick:()=>T(s.product),className:"text-red-400 hover:text-red-600 flex items-center gap-1",children:[e.jsx(O,{size:14})," Remove"]})]})]}),e.jsxs("div",{className:"flex flex-col items-center sm:items-end gap-4 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("button",{className:"px-3 py-1.5 hover:bg-gray-50 text-gray-600",onClick:()=>j(s.product,Math.max(1,s.qty-1)),children:e.jsx(U,{size:14})}),e.jsx("span",{className:"w-10 text-center font-medium text-sm border-x border-gray-200 py-1.5",children:s.qty}),e.jsx("button",{className:"px-3 py-1.5 hover:bg-gray-50 text-gray-600",onClick:()=>j(s.product,s.qty+1),children:e.jsx(V,{size:14})})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"block font-bold text-lg text-gray-900",children:["₹",s.price*s.qty]}),s.qty>1&&e.jsxs("span",{className:"text-xs text-gray-400",children:["₹",s.price," each"]})]})]})]})},s.product)),e.jsx(f,{delay:.2,children:e.jsxs("div",{className:"bg-white border border-dashed border-secondary/50 rounded-xl p-4 flex items-center gap-4",children:[e.jsx(L,{className:"text-primary",size:24}),e.jsx("p",{className:"text-sm text-gray-700 font-medium",children:"Congratulations! You've unlocked free standard shipping."})]})})]}),e.jsx("div",{className:"lg:w-1/3",children:e.jsx(f,{delay:.3,children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 sticky top-24",children:[e.jsxs("h2",{className:"text-xl font-serif font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(A,{size:20,className:"text-primary"})," Order Summary"]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-bold text-gray-900",children:["₹",d.toLocaleString()]})]}),r&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{children:["Discount (",r.code,")"]}),e.jsxs("span",{className:"font-bold",children:["-₹",i.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Shipping Estimate"}),e.jsx("span",{className:"font-bold text-green-600",children:u===0?"FREE":`₹${u}`})]}),e.jsxs("div",{className:"flex justify-between text-gray-600",children:[e.jsx("span",{children:"Tax (18% GST)"}),e.jsxs("span",{className:"font-bold text-gray-900",children:["₹",C.toLocaleString()]})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-4 flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-lg text-gray-900",children:"Total Amount"}),e.jsxs("span",{className:"font-bold text-2xl text-primary",children:["₹",$.toLocaleString()]})]}),e.jsx("p",{className:"text-xs text-gray-400 text-right",children:"Inclusive of all taxes"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 block",children:"Apply Promo Code"}),r?e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-green-800 text-sm",children:r.code}),e.jsx("p",{className:"text-xs text-green-600",children:r.type==="percentage"?`${r.discount}% discount`:`₹${r.discount} discount`})]}),e.jsx("button",{onClick:Y,className:"text-xs text-red-600 hover:text-red-700 font-bold",children:"Remove"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:l,onChange:s=>{N(s.target.value),n("")},onKeyPress:s=>s.key==="Enter"&&w(),placeholder:"e.g. WELLNESS20",className:"flex-grow border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-primary"}),e.jsx(y,{onClick:w,disabled:!l,className:"bg-primary text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-opacity-90 transition disabled:bg-gray-300 disabled:cursor-not-allowed border-none",children:"Apply"})]}),v&&e.jsx("p",{className:"text-xs text-red-600 font-medium",children:v}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Try: WELLNESS20, SAVE50, HEALTHY25"})]})]}),e.jsx(y,{onClick:I,className:"w-full bg-primary text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:bg-opacity-90 hover:shadow-xl transition-all block text-center border-none",children:"Proceed to Checkout"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-8 py-6 border-t border-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-50 flex items-center justify-center text-green-600 mb-2",children:e.jsx(W,{size:16})}),e.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase",children:"Secure Pay"})]}),e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-50 flex items-center justify-center text-green-600 mb-2",children:e.jsx(G,{size:16})}),e.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase",children:"Easy Returns"})]}),e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-50 flex items-center justify-center text-green-600 mb-2",children:e.jsx(L,{size:16})}),e.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase",children:"Tracked"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-gray-700",children:"Need help with your order?"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Our experts are here 24/7"})]}),e.jsx("button",{className:"text-primary text-xs font-bold bg-white border border-gray-200 px-3 py-1.5 rounded-lg shadow-sm hover:shadow",children:"Contact Us"})]})]})})})]}),e.jsxs("div",{className:"mt-20",children:[e.jsx("h3",{className:"text-2xl font-serif font-bold text-gray-800 mb-8",children:"You Might Also Like"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:P.map(s=>e.jsx(D,{product:s},s._id))})]})]})]})})};export{te as default};
