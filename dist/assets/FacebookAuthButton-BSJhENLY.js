import{b as j,j as a,a as m}from"./index-DsP1R5yV.js";import{r as l,b}from"./vendor-react-B8KVy-C4.js";import{m as h}from"./vendor-ui-DMuw5F6C.js";const M=({text:f="Continue with Google",redirect:p="/"})=>{const[t,s]=l.useState(!1),[d,n]=l.useState(null),[r,w]=l.useState(null),{user:y,googleLogin:I}=j();b(),l.useEffect(()=>{if((async()=>{try{const e=await m.get("/auth/status");e.data.googleClientId&&e.data.googleClientId!=="NOT_CONFIGURED"&&w(e.data.googleClientId)}catch(e){console.error("Failed to fetch Google Client ID:",e)}})(),!document.querySelector('script[src="https://accounts.google.com/gsi/client"]')){const e=document.createElement("script");e.async=!0,e.defer=!0,e.src="https://accounts.google.com/gsi/client",document.head.appendChild(e)}},[]);const i=async()=>{s(!0),n(null);try{if(!window.google||!window.google.accounts||!window.google.accounts.oauth2)throw new Error("Google Identity Services not loaded");google.accounts.oauth2.initTokenClient({client_id:r,scope:"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email",callback:async e=>{var g,c;if(e&&e.access_token)try{await I(e.access_token),window.location.href=p}catch(u){console.error("Backend Google auth error:",u),n(((c=(g=u.response)==null?void 0:g.data)==null?void 0:c.message)||"Google authentication failed with backend."),s(!1)}else s(!1)},error_callback:e=>{console.error("Google token client error:",e),n("Google sign-in failed."),s(!1)}}).requestAccessToken()}catch(o){console.error("Google sign-in error:",o),n(o.message||"Google sign-in failed."),s(!1)}};return!r||r==="NOT_CONFIGURED"?null:a.jsxs("div",{className:"w-full",children:[d&&a.jsx(h.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded text-sm",children:d}),a.jsxs(h.button,{onClick:i,disabled:t,whileHover:{scale:t?1:1.02},whileTap:{scale:t?1:.98},className:`w-full flex items-center justify-center gap-3 px-4 py-2.5 border border-gray-300 rounded-lg font-medium transition-all ${t?"bg-gray-100 cursor-not-allowed text-gray-600":"bg-white hover:bg-gray-50 text-gray-700 hover:shadow-md"}`,children:[a.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:a.jsx("image",{href:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjRkZGRkZGIi8+CjxwYXRoIGQ9Ik0xMS43OCA2LjI2SDEyLjA2TDEyLjA2IDEwLjc0SDEyLjA2SDE2LjEyVjE2LjEySDEyLjA2SDEyLjA2VjExLjU4SDEyLjA2SDE2LjEyVjYuMjZIMTEuNzhWNi4yNloiIGZpbGw9IiM0Mzg1RjQiLz4KPHBhdGggZD0iTTExLjc4IDcuNzJIMTIuMDZWMTAuNzRMMTIuMDYgMTYuMTJIMTAuOVYxMi45SDEwLjcyQzEwLjMzIDEyLjkgOS45OSAxMi41NiA5Ljk5IDEyLjE3VjExLjA4QzkuOTkgMTAuNjkgMTAuMzMgMTAuMzUgMTAuNzIgMTAuMzVIMTEuNzh2MjVWNy43MloiIGZpbGw9IiMzNDczRTYiLz4KPC9zdmc+",width:"24",height:"24"})}),t?"Signing in...":f]})]})},A=({text:f="Continue with Facebook",redirect:p="/"})=>{const[t,s]=l.useState(!1),[d,n]=l.useState(null),[r,w]=l.useState(null),y=b();l.useEffect(()=>{(async()=>{try{const o=await m.get("/auth/status");o.data.facebookAppId&&o.data.facebookAppId!=="NOT_CONFIGURED"&&w(o.data.facebookAppId)}catch(o){console.error("Failed to fetch Facebook App ID:",o)}})(),window.FB||(window.fbAsyncInit=function(){FB.init({appId:r,xfbml:!0,version:"v18.0"})},function(o,e,g){var c,u=o.getElementsByTagName(e)[0];o.getElementById(g)||(c=o.createElement(e),c.id=g,c.async=!0,c.src="https://connect.facebook.net/en_US/sdk.js",u.parentNode.insertBefore(c,u))}(document,"script","facebook-jssdk"))},[r]);const I=async()=>{s(!0),n(null);try{if(!window.FB)throw new Error("Facebook SDK not loaded");window.FB.login(async i=>{if(i.authResponse){const o=i.authResponse.accessToken;(await m.post("/auth/facebook",{accessToken:o})).data.user&&y(p)}else n("Facebook login was cancelled");s(!1)},{scope:"public_profile,email"})}catch(i){console.error("Facebook sign-in error:",i),n(i.message||"Facebook sign-in failed. Please check your credentials."),s(!1)}};return!r||r==="NOT_CONFIGURED"?null:a.jsxs("div",{className:"w-full",children:[d&&a.jsx(h.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded text-sm",children:d}),a.jsxs(h.button,{onClick:I,disabled:t,whileHover:{scale:t?1:1.02},whileTap:{scale:t?1:.98},className:`w-full flex items-center justify-center gap-3 px-4 py-2.5 border border-gray-300 rounded-lg font-medium transition-all ${t?"bg-gray-100 cursor-not-allowed text-gray-600":"bg-white hover:bg-gray-50 text-gray-700 hover:shadow-md"}`,children:[a.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z",fill:"#1877F2"})}),t?"Signing in...":f]})]})};export{A as F,M as G};
