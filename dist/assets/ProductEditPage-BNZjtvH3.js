import{j as e,a as n}from"./index-DsP1R5yV.js";import{e as z,b as A,r as s,L as H}from"./vendor-react-B8KVy-C4.js";import{y as M,ac as B}from"./vendor-ui-DMuw5F6C.js";import"./vendor-utils-C0Zqfgkc.js";const Y=()=>{const{id:c}=z(),P=A(),[m,p]=s.useState(""),[g,f]=s.useState(0),[x,i]=s.useState(""),[b,h]=s.useState(""),[y,j]=s.useState(""),[v,N]=s.useState(0),[w,U]=s.useState(""),[k,C]=s.useState(!1),[S,d]=s.useState([]),[I,o]=s.useState(!1),[q,D]=s.useState(!0);s.useEffect(()=>{(async()=>{try{const{data:a}=await n.get(`/products/${c}`);p(a.name),f(a.price),i(a.image),h(a.brand),j(a.category),N(a.countInStock),C(a.isBestseller||!1),d(a.images||[]),D(!1)}catch(a){console.error(a)}})()},[c]);const E=async t=>{const a=t.target.files[0],l=new FormData;l.append("image",a),o(!0);try{const r={headers:{"Content-Type":"multipart/form-data"}},{data:u}=await n.post("/upload",l,r);i(u),o(!1)}catch(r){console.error(r),o(!1)}},F=async t=>{const a=Array.from(t.target.files);if(a.length>5){alert("You can only upload up to 5 images");return}const l=new FormData;a.forEach(r=>{l.append("images",r)}),o(!0);try{const r={headers:{"Content-Type":"multipart/form-data"}},{data:u}=await n.post("/upload/multiple",l,r);d(u),o(!1)}catch(r){console.error(r),o(!1)}},L=async t=>{t.preventDefault();try{await n.put(`/products/${c}`,{name:m,price:g,image:x,brand:b,category:y,description:w,countInStock:v,isBestseller:k,images:S}),P("/admin/productlist")}catch(a){console.error(a)}};return q?e.jsx("div",{className:"text-center py-20",children:"Loading..."}):e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[e.jsxs(H,{to:"/admin/productlist",className:"text-gray-500 hover:text-primary mb-4 flex items-center gap-2 transition-colors",children:[e.jsx(M,{size:18})," Go Back"]}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md border",children:[e.jsx("h1",{className:"text-2xl font-serif font-bold text-primary mb-6",children:"Edit Product"}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Name"}),e.jsx("input",{type:"text",required:!0,className:"w-full border p-2 rounded focus:outline-none focus:border-secondary",value:m,onChange:t=>p(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Price"}),e.jsx("input",{type:"number",required:!0,className:"w-full border p-2 rounded focus:outline-none focus:border-secondary",value:g,onChange:t=>f(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Image"}),e.jsx("input",{type:"text",required:!0,className:"w-full border p-2 rounded focus:outline-none focus:border-secondary mb-2",value:x,onChange:t=>i(t.target.value)}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",id:"image-file",className:"hidden",onChange:E}),e.jsxs("label",{htmlFor:"image-file",className:"cursor-pointer bg-gray-100 py-2 px-4 rounded border hover:bg-gray-200 inline-flex items-center gap-2",children:[e.jsx(B,{size:16})," ",I?"Uploading...":"Upload Image"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Additional Images (Max 5)"}),e.jsx("input",{type:"text",className:"w-full border p-2 rounded focus:outline-none focus:border-secondary mb-2",value:S.join(", "),onChange:t=>d(t.target.value.split(",").map(a=>a.trim())),placeholder:"Enter image URLs comma separated"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",id:"multiple-images-file",className:"hidden",multiple:!0,onChange:F}),e.jsxs("label",{htmlFor:"multiple-images-file",className:"cursor-pointer bg-gray-100 py-2 px-4 rounded border hover:bg-gray-200 inline-flex items-center gap-2",children:[e.jsx(B,{size:16})," ",I?"Uploading...":"Upload Images"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Category"}),e.jsx("input",{type:"text",required:!0,className:"w-full border p-2 rounded focus:outline-none focus:border-secondary",value:y,onChange:t=>j(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Brand"}),e.jsx("input",{type:"text",required:!0,className:"w-full border p-2 rounded focus:outline-none focus:border-secondary",value:b,onChange:t=>h(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Count In Stock"}),e.jsx("input",{type:"number",required:!0,className:"w-full border p-2 rounded focus:outline-none focus:border-secondary",value:v,onChange:t=>N(t.target.value)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isBestseller",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded",checked:k,onChange:t=>C(t.target.checked)}),e.jsx("label",{htmlFor:"isBestseller",className:"ml-2 block text-gray-700 font-bold",children:"Is Bestseller?"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Description"}),e.jsx("textarea",{required:!0,rows:"4",className:"w-full border p-2 rounded focus:outline-none focus:border-secondary",value:w,onChange:t=>U(t.target.value)})]}),e.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2 rounded hover:bg-opacity-90 transition font-bold",children:"Update Product"})]})]})]})};export{Y as default};
