import{b as ie,a as j,j as e}from"./index-DsP1R5yV.js";import{b as ce,r,L as K}from"./vendor-react-B8KVy-C4.js";import{w as xe,U as R,x as N,a as me,c as ge}from"./vendor-ui-DMuw5F6C.js";import"./vendor-utils-C0Zqfgkc.js";const ye=()=>{var J;const{user:a,logout:V,updateProfile:q}=ie(),m=ce(),[x,v]=r.useState("profile"),[d,w]=r.useState(""),[g,k]=r.useState(""),[u,Q]=r.useState(""),[S,X]=r.useState(""),[C,P]=r.useState(""),[T,D]=r.useState(""),[O,A]=r.useState(""),[L,I]=r.useState(""),[z,M]=r.useState(""),[n,U]=r.useState(""),[Z,p]=r.useState(!1),[E,i]=r.useState(null),[_,b]=r.useState(""),[$,ee]=r.useState([]),[se,F]=r.useState(!0),[h,W]=r.useState(""),[c,G]=r.useState(null),[y,Y]=r.useState(!1),[f,B]=r.useState("");r.useEffect(()=>{a?(w(a.name),k(a.email),P(a.phone||""),D(a.address||""),A(a.city||""),I(a.postalCode||""),M(a.country||""),U(a.avatar||""),re()):m("/login")},[m,a]);const re=async()=>{try{const{data:s}=await j.get("/orders/myorders");ee(s),F(!1)}catch(s){console.error(s),F(!1)}},ae=async s=>{const t=s.target.files[0],o=new FormData;o.append("image",t),p(!0);try{const l={headers:{"Content-Type":"multipart/form-data"}},{data:ne}=await j.post("/upload",o,l);U(ne),p(!1)}catch(l){console.error(l),p(!1)}},te=async s=>{var t,o;if(s.preventDefault(),i(null),u!==S){i("Passwords do not match"),b("error");return}try{await q({id:a._id,name:d,email:g,password:u,phone:C,address:T,city:O,postalCode:L,country:z,avatar:n}),i("Profile updated successfully"),b("success"),setTimeout(()=>i(null),3e3)}catch(l){i(((o=(t=l.response)==null?void 0:t.data)==null?void 0:o.message)||"Update failed"),b("error")}},le=()=>{V(),m("/")},H=async s=>{var t,o;v("tracking"),W(s),Y(!0),B(""),G(null);try{const{data:l}=await j.get(`/shipping/track/${s}`);G(l)}catch(l){B(((o=(t=l.response)==null?void 0:t.data)==null?void 0:o.message)||"Tracking information not found for this Order ID.")}finally{Y(!1)}},oe=s=>{s.preventDefault(),h&&H(h)},de=[{id:"profile",label:"My Profile",icon:e.jsx(R,{size:20})},{id:"orders",label:"My Orders",icon:e.jsx(N,{size:20})},{id:"tracking",label:"Track Order",icon:e.jsx(ge,{size:20})}];return e.jsx("div",{className:"min-h-screen bg-background py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 max-w-6xl mx-auto",children:[e.jsx("div",{className:"w-full md:w-1/4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 bg-primary/5 flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-primary mb-3 overflow-hidden border-4 border-white shadow-md relative",children:n?e.jsx("img",{src:n,alt:d,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white text-3xl font-bold font-serif",children:d==null?void 0:d.charAt(0).toUpperCase()})}),e.jsx("h3",{className:"font-bold text-gray-800 line-clamp-1",children:d}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:g})]}),e.jsxs("nav",{className:"p-2",children:[de.map(s=>e.jsxs("button",{onClick:()=>v(s.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 mb-1 text-sm font-medium ${x===s.id?"bg-primary text-white shadow-md":"text-gray-600 hover:bg-gray-50"}`,children:[s.icon,s.label]},s.id)),e.jsxs("button",{onClick:le,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 text-sm font-medium text-red-500 hover:bg-red-50 mt-2",children:[e.jsx(xe,{size:20}),"Logout"]})]})]})}),e.jsxs("div",{className:"w-full md:w-3/4",children:[x==="profile"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 md:p-8 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-serif font-bold text-primary mb-6",children:"Account Settings"}),E&&e.jsxs("div",{className:`p-4 rounded-xl mb-6 flex items-center gap-2 ${_==="success"?"bg-green-50 text-green-700 border border-green-100":"bg-red-50 text-red-700 border border-red-100"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${_==="success"?"bg-green-500":"bg-red-500"}`}),E]}),e.jsxs("form",{onSubmit:te,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 overflow-hidden border border-gray-200",children:n?e.jsx("img",{src:n,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(R,{size:24})})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:"avatar-upload",className:"hidden",onChange:ae}),e.jsx("label",{htmlFor:"avatar-upload",className:"cursor-pointer bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors inline-block",children:Z?"Uploading...":"Change Photo"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Allowed JPG, GIF or PNG. Max size of 800K"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",value:d,onChange:s=>w(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",value:g,onChange:s=>k(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"text",placeholder:"+91 98765 43210",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",value:C,onChange:s=>P(s.target.value)})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100",children:"Address Book"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Street Address"}),e.jsx("input",{type:"text",placeholder:"123 Wellness Street",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",value:T,onChange:s=>D(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"City"}),e.jsx("input",{type:"text",placeholder:"Mumbai",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",value:O,onChange:s=>A(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Postal Code"}),e.jsx("input",{type:"text",placeholder:"400001",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",value:L,onChange:s=>I(s.target.value)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Country"}),e.jsx("input",{type:"text",placeholder:"India",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",value:z,onChange:s=>M(s.target.value)})]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100",children:"Security"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",placeholder:"Leave blank to keep same",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",value:u,onChange:s=>Q(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",placeholder:"Confirm new password",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",value:S,onChange:s=>X(s.target.value)})]})]})]})]}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsx("button",{type:"submit",className:"bg-primary text-white px-8 py-3 rounded-xl font-bold hover:bg-secondary hover:text-primary transition-all duration-300 shadow-lg shadow-primary/20",children:"Save Changes"})})]})]}),x==="orders"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 md:p-8 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-serif font-bold text-primary mb-6",children:"My Orders"}),se?e.jsx("p",{className:"text-center text-gray-500 py-10",children:"Loading orders..."}):$.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl border border-dashed border-gray-200",children:[e.jsx(N,{size:48,className:"mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't placed any orders yet."}),e.jsx(K,{to:"/shop",className:"text-primary font-bold hover:underline",children:"Start Shopping"})]}):e.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-100",children:e.jsxs("table",{className:"min-w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-100",children:[e.jsx("th",{className:"py-4 px-6 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"py-4 px-6 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"py-4 px-6 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"py-4 px-6 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"py-4 px-6 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:$.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors",children:[e.jsxs("td",{className:"py-4 px-6 text-sm font-medium text-gray-900 font-mono",children:["#",s._id.substring(0,8).toUpperCase()]}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:new Date(s.createdAt).toLocaleDateString()}),e.jsxs("td",{className:"py-4 px-6 text-sm font-bold text-gray-900",children:["â‚¹",s.totalPrice.toLocaleString()]}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold w-fit uppercase tracking-tighter ${s.isPaid?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.isPaid?"Paid":"Unpaid"}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold w-fit uppercase tracking-tighter ${s.isDelivered?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:s.isDelivered?"Delivered":"Processing"})]})}),e.jsx("td",{className:"py-4 px-6 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{to:`/order/${s._id}`,className:"text-primary hover:text-secondary font-bold bg-primary/5 hover:bg-primary/10 px-3 py-1.5 rounded-lg transition-colors",children:"View"}),e.jsx("button",{onClick:()=>H(s._id),className:"text-secondary hover:text-primary font-bold bg-secondary/5 hover:bg-secondary/10 px-3 py-1.5 rounded-lg transition-colors",children:"Track"})]})})]},s._id))})]})})]}),x==="tracking"&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 md:p-8 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-serif font-bold text-primary mb-6",children:"Track Your Shipment"}),e.jsxs("form",{onSubmit:oe,className:"flex flex-col md:flex-row gap-4 mb-8",children:[e.jsx("input",{type:"text",placeholder:"Enter Order ID (e.g. 65db...)",className:"flex-1 px-4 py-3 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all",value:h,onChange:s=>W(s.target.value)}),e.jsx("button",{type:"submit",disabled:y,className:"bg-primary text-white px-8 py-3 rounded-xl font-bold hover:bg-secondary hover:text-primary transition-all disabled:opacity-50",children:y?"Searching...":"Track Package"})]}),f&&e.jsxs("div",{className:"p-4 bg-red-50 text-red-600 rounded-xl border border-red-100 mb-6 flex items-center gap-2",children:[e.jsx(me,{size:18})," ",f]}),c?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold tracking-wider mb-1",children:"Status"}),e.jsx("p",{className:"text-primary font-bold",children:c.current_status||"Processing"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold tracking-wider mb-1",children:"Courier"}),e.jsx("p",{className:"text-primary font-bold",children:c.courier_name||"Fship Logistics"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold tracking-wider mb-1",children:"AWB Number"}),e.jsx("p",{className:"text-primary font-bold",children:c.awb_number||"N/A"})]})]}),e.jsxs("div",{className:"relative pl-8 border-l-2 border-gray-100 space-y-8 ml-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[41px] top-0 w-4 h-4 rounded-full bg-primary border-4 border-white shadow-sm"}),e.jsx("h4",{className:"font-bold text-gray-800",children:"Order Dispatched"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your package is on its way to the delivery hub."})]}),(J=c.scans)==null?void 0:J.map((s,t)=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[41px] top-0 w-4 h-4 rounded-full bg-gray-300 border-4 border-white shadow-sm"}),e.jsx("h4",{className:"font-bold text-gray-700",children:s.status}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.location," | ",new Date(s.date).toLocaleString()]})]},t)),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[41px] top-0 w-4 h-4 rounded-full bg-gray-200 border-4 border-white shadow-sm"}),e.jsx("h4",{className:"font-bold text-gray-400",children:"Out for Delivery"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Waiting for update from courier partner."})]})]})]}):!y&&!f&&e.jsxs("div",{className:"text-center py-20 bg-gray-50/50 rounded-3xl border border-dashed border-gray-200",children:[e.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm",children:e.jsx(N,{size:32,className:"text-gray-300"})}),e.jsx("p",{className:"text-gray-500",children:'Wait for your order to be marked as "Shipped" to see real-time updates.'})]})]})]})]})})})};export{ye as default};
